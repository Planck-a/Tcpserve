[内存池]()
```cpp
class MemoryBllock{
public:
	MemoryAlloc* pAlloc;//所属大内存块（池）
	MemoryBlock* pNext;//下一块位置
	int nID;//内存块编号
	int nRef;//引用次数
	bool bPool;//是否在内存池中
}
```
`MemoryBlloc是内存块的首部，内存池中所有的内存块是用链表相连的，每个首部中标记了这个内存块在内存池中的位置以及下个块的指针;`

```cpp
class MemoryAlloc
{
public:
  MemoryAlloc();
  ~MemoryAlloc();  
  void initMemory();//初始化池
  void* allocMemory(size_t nSize);//在块中申请内存，符合池子大小的，返回分配好的池中内存块地址；不符合的，向系统进行申请
  void freeMemory(void* pMem);//释放内存，从池中拿出的，归还到链表中；向系统申请的，就直接delete

protected:
	char* _pBuf;//内存池地址
	MemoryBlock* _pHeader;//头部内存单元
	size_t _nSzie;//内存单元的大小
	size_t _nBlockSzie;//内存单元的数量
	std::mutex _mutex;  

}
```

`MemoryAlloc是内存池的管理，包括池的建立、申请和释放，根据上层的内存管理传来的申请内存大小，返回想要的地址；`
---

```cpp
class MemoryMgr
{
private:
	MemoryMgr()；
	~MemoryMgr()；
public:
	static MemoryMgr& Instance();//单例模式，保证整个项目中只有一个内存管理机制
	void init_szAlloc(int nBegin, int nEnd, MemoryAlloc* pMemA)；//初始化内存池映射数组
	void* allocMem(size_t nSize);//申请内存，根据申请的大小，映射到相应的池中
	void freeMem(void* pMem);//释放内存
private:
	MemoryAlloctor<64, 100000> _mem64;
	MemoryAlloctor<128, 100000> _mem128;
	MemoryAlloctor<256, 100000> _mem256;
	MemoryAlloctor<512, 100000> _mem512;
	MemoryAlloctor<1024, 100000> _mem1024;
	MemoryAlloc* _szAlloc[MAX_MEMORY_SZIE + 1];
}
```
